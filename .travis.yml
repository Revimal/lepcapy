language: c
sudo: required
dist: trusty

os: 
  - linux

matrix:
  include:
    - compiler: gcc
    addons:
      apt:
        sources:
          - ubuntu-toolchain-r-test
        packages:
          - gcc-4.9
      env: COMPILER=gcc-4.9

    - compiler: gcc
    addons:
      apt:
        sources:
          - ubuntu-toolchain-r-test
        packages:
          - gcc-5
      env: COMPILER=gcc-5

    - compiler: clang
    addons:
      apt:
        sources:
          - ubuntu-toolchain-r-test
          - llvm-toolchain-precise-3.6
        packages:
          - clang-3.6
      env: COMPILER=clang-3.6

    - compiler: clang
    addons:
      apt:
        sources:
          - ubuntu-toolchain-r-test
          - llvm-toolchain-precise-3.7
        packages:
          - clang-3.7
    env: COMPILER=clang-3.7

before_install:
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo apt-get update; fi

script:
  - mkdir build && cd build
  - cmake -DCMAKE_CXX_COMPILER=$COMPILER ..
  - make
  - cd .. && rm -r ./build
